Base name = 20230605_10_44_58_Cage3976645_Animal2_FosCreERxAi9tdtomato_Male_Cohort1_TMTWaterControl
Looking for images in /athena/listonlab/scratch/dje4001/lightsheet_scratch/WATERCONTROL/lightsheet/raw/20230605_10_44_58_Cage3976645_Animal2_FosCreERxAi9tdtomato_Male_Cohort1_TMTWaterControl...
Found 102816 compatible images
Setting up 112 workers...
Pystripe batch processing progress:
  0%|          | 0/102816 [00:00<?, ?it/s]  1%|          | 656/102816 [1:19:20<1319:44:13, 46.51s/it]  1%|          | 760/102816 [1:19:20<177:34:35,  6.26s/it]   0%|          | 1/102816 [02:18<3968:27:14, 138.95s/it]  0%|          | 2/102816 [02:38<1956:23:41, 68.50s/it]   0%|          | 11/102816 [02:38<229:05:31,  8.02s/it]  0%|          | 15/102816 [02:39<148:25:56,  5.20s/it]  0%|          | 26/102816 [02:39<62:45:00,  2.20s/it]   0%|          | 100/102816 [02:39<9:29:59,  3.00it/s]  0%|          | 100/102816 [02:50<9:29:59,  3.00it/s]  0%|          | 113/102816 [04:57<60:54:34,  2.14s/it]  0%|          | 114/102816 [05:01<61:46:52,  2.17s/it]  0%|          | 133/102816 [05:10<45:29:08,  1.59s/it]  0%|          | 145/102816 [05:15<37:39:52,  1.32s/it]  0%|          | 154/102816 [05:19<32:40:30,  1.15s/it]  0%|          | 161/102816 [05:22<28:58:04,  1.02s/it]  0%|          | 168/102816 [05:23<23:14:53,  1.23it/s]  0%|          | 178/102816 [05:23<16:55:30,  1.68it/s]  0%|          | 216/102816 [05:26<7:38:39,  3.73it/s]   0%|          | 223/102816 [05:26<6:49:08,  4.18it/s]  0%|          | 223/102816 [05:40<6:49:08,  4.18it/s]most recent call last):
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 125, in worker
    result = (True, func(*args, **kwds))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 652, in _read_filter_save
    read_filter_save(**input_dict)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 607, in read_filter_save
    fimg = filter_streaks(img, sigma, level=level, wavelet=wavelet, crossover=crossover, threshold=threshold, flat=flat, dark=dark)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 471, in filter_streaks
    foreground_filtered = filter_subband(foreground, sigma[0], level, wavelet)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 388, in filter_subband
    img_log = np.log(1 + img)
numpy.core._exceptions._ArrayMemoryError: Unable to allocate 24.4 MiB for an array with shape (1600, 2000) and data type float64
"""

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/fs01/dje4001/anaconda3/bin/pystripe", line 8, in <module>
    sys.exit(main())
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 972, in main
    batch_filter(input_path,
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 824, in batch_filter
    list(tqdm.tqdm(pool.imap(_read_filter_save, args, chunksize=chunks), total=len(args), ascii=True))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/tqdm/std.py", line 1195, in __iter__
    for obj in iterable:
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 868, in next
    raise value
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 125, in worker
    result = (True, func(*args, **kwds))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 652, in _read_filter_save
    read_filter_save(**input_dict)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 607, in read_filter_save
    fimg = filter_streaks(img, sigma, level=level, wavelet=wavelet, crossover=crossover, threshold=threshold, flat=flat, dark=dark)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 471, in filter_streaks
    foreground_filtered = filter_subband(foreground, sigma[0], level, wavelet)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 388, in filter_subband
    img_log = np.log(1 + img)
numpy.core._exceptions.MemoryError: Unable to allocate 24.4 MiB for an array with shape (1600, 2000) and data type float64
  0%|          | 225/102816 [07:09<85:33:31,  3.00s/it]  0%|          | 226/102816 [07:28<102:03:39,  3.58s/it]  0%|          | 231/102816 [07:32<85:23:11,  3.00s/it]   0%|          | 233/102816 [07:34<79:02:17,  2.77s/it]  0%|          | 236/102816 [07:37<71:18:11,  2.50s/it]  0%|          | 237/102816 [07:39<68:05:19,  2.39s/it]  0%|          | 240/102816 [07:43<62:22:22,  2.19s/it]  0%|          | 243/102816 [07:44<46:59:59,  1.65s/it]  0%|          | 246/102816 [07:44<34:45:43,  1.22s/it]  0%|          | 249/102816 [07:49<37:47:41,  1.33s/it]  0%|          | 259/102816 [07:52<20:13:17,  1.41it/s]  0%|          | 264/102816 [07:54<18:14:03,  1.56it/s]  0%|          | 274/102816 [07:55<10:48:51,  2.63it/s]  0%|          | 284/102816 [07:57<9:15:55,  3.07it/s]   0%|          | 295/102816 [08:01<9:09:22,  3.11it/s]  0%|          | 309/102816 [08:02<6:12:02,  4.59it/s]  0%|          | 319/102816 [08:03<5:47:26,  4.92it/s]  0%|          | 322/102816 [08:05<7:01:24,  4.05it/s]  0%|          | 324/102816 [08:06<7:24:47,  3.84it/s]  0%|          | 330/102816 [08:06<5:23:20,  5.28it/s]  0%|          | 330/102816 [08:20<5:23:20,  5.28it/s]  1%|          | 735/102816 [56:21<481:05:23, 16.97s/it]  0%|          | 337/102816 [09:53<146:32:32,  5.15s/it]  0%|          | 338/102816 [10:08<164:31:59,  5.78s/it]  0%|          | 346/102816 [10:15<105:13:43,  3.70s/it]  0%|          | 349/102816 [10:19<92:52:19,  3.26s/it]   0%|          | 351/102816 [10:26<95:46:14,  3.36s/it]  0%|          | 359/102816 [10:27<52:15:37,  1.84s/it]  0%|          | 361/102816 [10:31<53:30:59,  1.88s/it]  0%|          | 363/102816 [10:31<44:59:20,  1.58s/it]  0%|          | 368/102816 [10:31<28:25:07,  1.00it/s]  0%|          | 371/102816 [10:39<40:01:53,  1.41s/it]  0%|          | 374/102816 [10:42<36:19:09,  1.28s/it]  0%|          | 381/102816 [10:44<22:29:39,  1.26it/s]  0%|          | 390/102816 [10:48<18:32:16,  1.53it/s]  0%|          | 401/102816 [10:50<12:33:14,  2.27it/s]  0%|          | 406/102816 [10:51<11:23:13,  2.50it/s]  0%|          | 407/102816 [10:52<11:30:04,  2.47it/s]  0%|          | 417/102816 [10:52<6:27:12,  4.41it/s]   0%|          | 419/102816 [10:52<6:10:33,  4.61it/s]  0%|          | 424/102816 [10:55<8:12:12,  3.47it/s]  0%|          | 434/102816 [10:55<5:41:21,  5.00it/s]  0%|          | 445/102816 [10:58<6:29:40,  4.38it/s]  0%|          | 447/102816 [11:08<19:41:26,  1.44it/s]  0%|          | 449/102816 [12:32<162:25:03,  5.71s/it]  0%|          | 450/102816 [13:15<248:04:49,  8.72s/it]  1%|          | 736/102816 [1:00:25<585:35:27, 20.65s/it]  1%|          | 741/102816 [1:01:56<578:29:08, 20.40s/it]  1%|          | 762/102816 [1:02:02<358:57:20, 12.66s/it]