Base name = 20230606_14_05_11_Cage3976645_Animal1_FosCreERxAi9_Male_Cohort1_TMTWaterControl
Looking for images in /athena/listonlab/scratch/dje4001/lightsheet_scratch/WATERCONTROL/lightsheet/raw/20230606_14_05_11_Cage3976645_Animal1_FosCreERxAi9_Male_Cohort1_TMTWaterControl...
Found 87864 compatible images
Setting up 112 workers...
Pystripe batch processing progress:
  0%|          | 0/87864 [00:00<?, ?it/s]  0%|          | 1/87864 [02:32<3717:04:07, 152.30s/it]  0%|          | 19/87864 [02:32<139:55:23,  5.73s/it]   0%|          | 36/87864 [02:33<61:17:55,  2.51s/it]   0%|          | 36/87864 [02:49<61:17:55,  2.51s/it]  0%|          | 113/87864 [04:50<47:08:01,  1.93s/it]  0%|          | 115/87864 [04:53<47:05:20,  1.93s/it]  0%|          | 118/87864 [05:00<47:35:15,  1.95s/it]  0%|          | 123/87864 [05:02<42:45:50,  1.75s/it]  0%|          | 125/87864 [05:09<45:45:28,  1.88s/it]  0%|          | 134/87864 [05:10<33:25:29,  1.37s/it]  0%|          | 141/87864 [05:12<26:48:49,  1.10s/it]  0%|          | 148/87864 [05:17<24:16:33,  1.00it/s]  0%|          | 158/87864 [05:17<15:59:43,  1.52it/s]  0%|          | 169/87864 [05:22<14:04:35,  1.73it/s]  0%|          | 219/87864 [05:24<5:02:34,  4.83it/s]   0%|          | 219/87864 [05:39<5:02:34,  4.83it/s]  1%|          | 758/87864 [53:52<422:39:41, 17.47s/it  0%|          | 228/87864 [07:22<51:52:31,  2.13s/it]  0%|          | 230/87864 [07:33<56:47:14,  2.33s/it]  0%|          | 231/87864 [07:40<62:03:06,  2.55s/it]  0%|          | 240/87864 [07:45<44:05:28,  1.81s/it]  0%|          | 251/87864 [07:46<28:18:40,  1.16s/it]  0%|          | 260/87864 [07:47<19:49:50,  1.23it/s]  0%|          | 266/87864 [07:52<20:10:33,  1.21it/s]  0%|          | 268/87864 [07:55<22:00:13,  1.11it/s]  0%|          | 270/87864 [08:00<26:55:33,  1.11s/it]  0%|          | 306/87864 [08:02<7:21:32,  3.30it/s]   0%|          | 311/87864 [08:08<10:04:49,  2.41it/s]  0%|          | 337/87864 [09:43<49:08:58,  2.02s/it]  0%|          | 338/87864 [09:51<53:05:55,  2.18s/it]  0%|          | 339/87864 [09:55<54:21:35,  2.24s/it]  0%|          | 341/87864 [10:03<58:41:09,  2.41s/it]  0%|          | 342/87864 [10:08<63:06:33,  2.60s/it]  0%|          | 347/87864 [10:24<66:34:41,  2.74s/it]  0%|          | 359/87864 [10:25<33:27:04,  1.38s/it]  0%|          | 363/87864 [10:29<32:11:50,  1.32s/it]  0%|          | 370/87864 [10:31<23:16:25,  1.04it/s]  0%|          | 390/87864 [10:32<10:25:38,  2.33it/s]  0%|          | 392/87864 [10:32<10:25:30,  2.33it/s]  0%|          | 393/87864 [10:36<14:38:16,  1.66it/s]  0%|          | 394/87864 [10:44<27:02:44,  1.11s/it]  0%|          | 401/87864 [10:45<16:37:31,  1.46it/s]  0%|          | 420/87864 [10:46<7:17:48,  3.33it/s]   0%|          | 434/87864 [10:46<4:43:00,  5.15it/s]  0%|          | 436/87864 [10:51<8:29:02,  2.86it/s]  0%|          | 438/87864 [11:04<22:43:25,  1.07it/s]  1%|          | 448/87864 [11:05<14:26:19,  1.68it/s]  1%|          | 448/87864 [11:19<14:26:19,  1.68it/s]  1%|          | 449/87864 [12:37<136:05:43,  5.60s/it]  1%|          | 451/87864 [12:38<120:34:19,  4.97s/it]  1%|          | 761/87864 [59:50<543:36:34, 22.47s/it]  1%|          | 776/87864 [59:50<111:55:48,  4.63s/it]
multiprocessing.pool.RemoteTraceback: 
"""
Traceback (most recent call last):
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 125, in worker
    result = (True, func(*args, **kwds))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 652, in _read_filter_save
    read_filter_save(**input_dict)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 607, in read_filter_save
    fimg = filter_streaks(img, sigma, level=level, wavelet=wavelet, crossover=crossover, threshold=threshold, flat=flat, dark=dark)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 474, in filter_streaks
    fimg = foreground_filtered * f + background_filtered * (1 - f)
numpy.core._exceptions._ArrayMemoryError: Unable to allocate 24.4 MiB for an array with shape (1600, 2000) and data type float64
"""

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/fs01/dje4001/anaconda3/bin/pystripe", line 8, in <module>
    sys.exit(main())
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 972, in main
    batch_filter(input_path,
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 824, in batch_filter
    list(tqdm.tqdm(pool.imap(_read_filter_save, args, chunksize=chunks), total=len(args), ascii=True))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/tqdm/std.py", line 1195, in __iter__
    for obj in iterable:
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 868, in next
    raise value
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/multiprocessing/pool.py", line 125, in worker
    result = (True, func(*args, **kwds))
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 652, in _read_filter_save
    read_filter_save(**input_dict)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 607, in read_filter_save
    fimg = filter_streaks(img, sigma, level=level, wavelet=wavelet, crossover=crossover, threshold=threshold, flat=flat, dark=dark)
  File "/home/fs01/dje4001/anaconda3/lib/python3.8/site-packages/pystripe/core.py", line 474, in filter_streaks
    fimg = foreground_filtered * f + background_filtered * (1 - f)
numpy.core._exceptions.MemoryError: Unable to allocate 24.4 MiB for an array with shape (1600, 2000) and data type float64
